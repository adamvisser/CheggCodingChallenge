

function runUsernameClick() {
	//TODO the user has now clicked check so we need to make sure its not empty, else give an error
	if (formIsEmpty()) {
		populateUseableUserNameListFromService();
		tellViewRequestIsLoading();
	} else {
		tellViewInputIsEmpty();
	}
}

function runObservers() {
	//TODO actually flesh these out to "guess" possible usernames to send over in addition to what they check that FIRST click
	runWordObserver();
	runEmptyObserver();
}


function formIsEmpty() {
	// body...
	if (getFormValue() == "") {
		return true;
	}
	return false;
}

function getFormValue() {
	return $("#chg-balloon-input").val();
}


function tellViewRequestIsLoading() {
	//TODO we add in a "were loading" message for the user
}

function tellViewRequestIsDone(names) {
	function addToIterateArray(name) {
		var htmlToAdd = "<i class='red checkmark box icon'></i>".concat(name, "</br>");
		var currentHTML = $("#username-suggestion-view").html();
		//this rerenders all the things and its probably pretty horrible for sure
		$("#username-suggestion-view").html(currentHTML.concat(htmlToAdd));
	}
	data.forEach(names);
}

function tellViewInputIsEmpty() {
	// body...
}


function setupUserNameList() {
	//since I dont have anything to act as "scope" we will pretend like its the whole window (app)
	if (window.USERNAMELIST === undefined) {
		window.USERNAMELIST = {};
		window.USERNAMELIST.usernameList = [];
		window.USERNAMELIST.goodUserNames = [];
		window.USERNAMELIST.badUserNames = [];
	}
}

function userNameLength() {
	return window.USERNAMELIST.usernameList.length;
}

//this just returns a list of useable username objects, or a string for use within a request. depending on the former will depend on what it returns upon fail, not sure just yet lots to do
function getUserNameList(forRequest = false) {

	//I wanted to make sure that only this function can get called, so that it will return the proper stuff, encapsulation things.
	//this returns the list of GOOD usernames as an array
	function getUseableUserNameListForAnIteration() {}

	//this returns the list of usernames as a string
	function getUseableUserNameListForARequest() {
		//this is needed to actually return something
		var returnString = "";

		//lets make sure that this scope has the ability to foreach over the array we are about to create
		//without having to create the function in line
		function addUserName(item) {
			returnString.concat(item);
			returnString.concat(",");
		}
		window.USERNAMELIST.usernameList.forEach(addUserName);
		console.log('built the username string for the request');
		return returnString.substring(0, returnString.length - 1);
	}

	if (forRequest) {
		return getUseableUserNameListForARequest();
	} else {
		return getUseableUserNameListForARequest();
	}
}

//this actually sets up, then runs the ajax request
function populateUseableUserNameListFromService() {
	// TODO check the below runs correctly
	setupUserNameList();
	if (!userNameLength()) {
		noUseableUsernamesAddNumbers();
	}
	// TODO use the json service to send a request using the usernameList from window scope
	sendRequest();
}

//this is the fucntion that ajax calls when it successfullly recieves a response
function populateUseableUserNameList(data) {
	function setupBadUserName(item) {
		window.USERNAMELIST.badUserNames.push(string(item.username));
	}

	function setupGoodUserName(item) {
		if (window.USERNAMELIST.badUserNames.indexOf(string(item.username)) == -1) {
			window.USERNAMELIST.goodUserNames.push(string(item.username));
		}
	}
	// TODO check the below runs correctly
	setupUserNameList();
	data.forEach(setupBadUserName);
	data.forEach(setupGoodUserName);
	window.USERNAMELIST.usernameList = [];
	// TODO from response put list of good usernames in place
	tellViewRequestIsDone(window.USERNAMELIST.goodUserNames);
}

//this is used by the form observers to add in possible names as they find them
function addNameToList(name) {
	// TODO check the below runs correctly
	setupUserNameList();
	//again casing as string cuz ive put no time into error handline
	window.USERNAMELIST.usernameList.push(string(name));
	console.log('added a possible username for use');
}

//this is used by the ajax response function to add in names that wont work
function addNameToBadList(name) {}
// TODO add in name to the list of bad user names in window scope


//this is used by the ajax response function to add in names that will work
function addNameToGoodList(name) {
	// TODO add in name to the list of good user names in window scope
}
//TODO implement this out to actually check for words, instead of just being all "hey look i can add 2 numbers at the end"

function finalWordCheck() {
	// TODO before we send off the request, make sure we have enough user names being sent of in the request
	// TODO make sure the below gets called at the right time, and works
}

function noUseableUsernamesAddNumbers() {
	// TODO we havent done so well and have no words to use to generate some good words, just add some numbers to whats in the form :(

	//lets make sure that this scope has the ability to foreach over the array we are about to create
	//without having to create the function in line
	function addRandomUserName(item) {
		addNameToList(formWord.concat(item));
	}

	console.log('O No! observers found no words, adding numbers so we have some now');
	//first we need some numbers
	//lets make sure they dont have a way of being the same!!!!
	var randomNumber = Math.floor(Math.random() * 1000);
	var randomModifer = Math.floor(Math.random() * 100);
	var randomDivider = Math.floor(Math.random() * 10);
	var randomNumbers = [string(randomNumber), string(randomNumber + randomModifer), string(randomNumber - randomModifer), string((randomNumber + randomModifer) / randomDivider), string((randomNumber - randomModifer) / randomDivider)];
	//then we need to get the username itself, gonna cast as string cuz... i have no error handling like anywhere in here and im scared
	var formWord = string(getFormValue());
	randomNumbers.forEach(addRandomUserName);
}

//one of the observers may have found a new word to use, check for it then add it in
function addWordToUseableWordsList(word) {
	// TODO make the above comment come true
}

function getUseableWordsList() {
	// TODO
}

function setupWordsList() {
	//since I dont have anything to act as "scope" we will pretend like its the whole window (app)
	if (window.WORDOBSERVER === undefined) {
		window.WORDOBSERVER = {};
		window.WORDOBSERVER.wordlist = {};
	}
}


function sendRequest() {
	function proeccessRequestResponse(data) {
		// This logs Trump4Pres's user data, since the username is registered, but
		// no user data for FeelTheBern1, since that username is not currently registered
		console.log("request done, logic starting");
		console.log(data);
		populateUseableUserNameList(data);
		console.log("request logic done");
	}

	// TODO use the below copied code to bring all the comments below it to life
	$.ajax("http://chegg-tutors.appspot.com/coding-challenge/api/user/?username=".concat(getUseableUserNameList(true))).done(proeccessRequestResponse);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkZvcm0uanMiLCJTdWdnZXN0aW9uVmlldy5qcyIsIlVzZXJOYW1lTGlzdC5qcyIsIldvcmRMaXN0LmpzIiwiVXNlck5hbWVTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsU0FBUyxnQkFBVCxHQUEyQjs7QUFFMUIsS0FBSSxhQUFKLEVBQW1CO0FBQ2xCLDJDQURrQjtBQUVsQiw2QkFGa0I7RUFBbkIsTUFHTztBQUNOLHlCQURNO0VBSFA7Q0FGRDs7QUFhQSxTQUFTLFlBQVQsR0FBdUI7O0FBRXRCLG1CQUZzQjtBQUd0QixvQkFIc0I7Q0FBdkI7OztBQ1RBLFNBQVMsV0FBVCxHQUF1Qjs7QUFFdEIsS0FBSSxrQkFBa0IsRUFBbEIsRUFBc0I7QUFDekIsU0FBTyxJQUFQLENBRHlCO0VBQTFCO0FBR0EsUUFBTyxLQUFQLENBTHNCO0NBQXZCOztBQVNBLFNBQVMsWUFBVCxHQUF3QjtBQUN2QixRQUFPLEVBQUUsb0JBQUYsRUFBd0IsR0FBeEIsRUFBUCxDQUR1QjtDQUF4Qjs7O0FDZEEsU0FBUyx3QkFBVCxHQUFvQzs7Q0FBcEM7O0FBSUEsU0FBUyxxQkFBVCxDQUErQixLQUEvQixFQUFzQztBQUNyQyxVQUFTLGlCQUFULENBQTJCLElBQTNCLEVBQWlDO0FBQ2hDLE1BQUksWUFBWSx5Q0FBeUMsTUFBekMsQ0FBaUQsSUFBakQsRUFBdUQsT0FBdkQsQ0FBWixDQUQ0QjtBQUVoQyxNQUFJLGNBQWMsRUFBRSwyQkFBRixFQUErQixJQUEvQixFQUFkOztBQUY0QixHQUloQyxDQUFFLDJCQUFGLEVBQStCLElBQS9CLENBQW9DLFlBQVksTUFBWixDQUFtQixTQUFuQixDQUFwQyxFQUpnQztFQUFqQztBQU1BLE1BQUssT0FBTCxDQUFhLEtBQWIsRUFQcUM7Q0FBdEM7O0FBVUEsU0FBUyxvQkFBVCxHQUFnQzs7Q0FBaEM7OztBQ2RBLFNBQVMsaUJBQVQsR0FBNEI7O0FBRTNCLEtBQUcsT0FBTyxZQUFQLEtBQXdCLFNBQXhCLEVBQWtDO0FBQ3BDLFNBQU8sWUFBUCxHQUFzQixFQUF0QixDQURvQztBQUVwQyxTQUFPLFlBQVAsQ0FBb0IsWUFBcEIsR0FBbUMsRUFBbkMsQ0FGb0M7QUFHcEMsU0FBTyxZQUFQLENBQW9CLGFBQXBCLEdBQW9DLEVBQXBDLENBSG9DO0FBSXBDLFNBQU8sWUFBUCxDQUFvQixZQUFwQixHQUFtQyxFQUFuQyxDQUpvQztFQUFyQztDQUZEOztBQVVBLFNBQVMsY0FBVCxHQUEwQjtBQUN6QixRQUFPLE9BQU8sWUFBUCxDQUFvQixZQUFwQixDQUFpQyxNQUFqQyxDQURrQjtDQUExQjs7O0FBS0EsU0FBUyxlQUFULENBQXlCLGFBQWEsS0FBYixFQUFvQjs7OztBQUs1QyxVQUFTLG9DQUFULEdBQWdELEVBQWhEOzs7QUFMNEMsVUFTbkMsaUNBQVQsR0FBNkM7O0FBRTVDLE1BQUksZUFBZSxFQUFmOzs7O0FBRndDLFdBTW5DLFdBQVQsQ0FBcUIsSUFBckIsRUFBMEI7QUFDekIsZ0JBQWEsTUFBYixDQUFvQixJQUFwQixFQUR5QjtBQUV6QixnQkFBYSxNQUFiLENBQW9CLEdBQXBCLEVBRnlCO0dBQTFCO0FBSUEsU0FBTyxZQUFQLENBQW9CLFlBQXBCLENBQWlDLE9BQWpDLENBQXlDLFdBQXpDLEVBVjRDO0FBVzVDLFVBQVEsR0FBUixDQUFZLDJDQUFaLEVBWDRDO0FBWTVDLFNBQU8sYUFBYSxTQUFiLENBQXVCLENBQXZCLEVBQTBCLGFBQWEsTUFBYixHQUFvQixDQUFwQixDQUFqQyxDQVo0QztFQUE3Qzs7QUFlQSxLQUFHLFVBQUgsRUFBYztBQUNiLFNBQU8sbUNBQVAsQ0FEYTtFQUFkLE1BRUs7QUFDSixTQUFPLG1DQUFQLENBREk7RUFGTDtDQXhCRDs7O0FBb0NBLFNBQVMsc0NBQVQsR0FBa0Q7O0FBRWpELHFCQUZpRDtBQUdqRCxLQUFJLENBQUMsZ0JBQUQsRUFBbUI7QUFDdEIsaUNBRHNCO0VBQXZCOztBQUhpRCxZQU9qRCxHQVBpRDtDQUFsRDs7O0FBWUEsU0FBUywyQkFBVCxDQUFxQyxJQUFyQyxFQUEyQztBQUMxQyxVQUFTLGdCQUFULENBQTBCLElBQTFCLEVBQStCO0FBQzlCLFNBQU8sWUFBUCxDQUFvQixZQUFwQixDQUFpQyxJQUFqQyxDQUFzQyxPQUFPLEtBQUssUUFBTCxDQUE3QyxFQUQ4QjtFQUEvQjs7QUFJQSxVQUFTLGlCQUFULENBQTJCLElBQTNCLEVBQWdDO0FBQy9CLE1BQUksT0FBTyxZQUFQLENBQW9CLFlBQXBCLENBQWlDLE9BQWpDLENBQXlDLE9BQU8sS0FBSyxRQUFMLENBQWhELEtBQW9FLENBQUMsQ0FBRCxFQUFJO0FBQzNFLFVBQU8sWUFBUCxDQUFvQixhQUFwQixDQUFrQyxJQUFsQyxDQUF1QyxPQUFPLEtBQUssUUFBTCxDQUE5QyxFQUQyRTtHQUE1RTtFQUREOztBQUwwQyxrQkFXMUMsR0FYMEM7QUFZMUMsTUFBSyxPQUFMLENBQWEsZ0JBQWIsRUFaMEM7QUFhMUMsTUFBSyxPQUFMLENBQWEsaUJBQWIsRUFiMEM7QUFjMUMsUUFBTyxZQUFQLENBQW9CLFlBQXBCLEdBQW1DLEVBQW5DOztBQWQwQyxzQkFnQjFDLENBQXNCLE9BQU8sWUFBUCxDQUFvQixhQUFwQixDQUF0QixDQWhCMEM7Q0FBM0M7OztBQW9CQSxTQUFTLGFBQVQsQ0FBdUIsSUFBdkIsRUFBNEI7O0FBRTNCOztBQUYyQixPQUkzQixDQUFPLFlBQVAsQ0FBb0IsWUFBcEIsQ0FBaUMsSUFBakMsQ0FBc0MsT0FBTyxJQUFQLENBQXRDLEVBSjJCO0FBSzNCLFNBQVEsR0FBUixDQUFZLG1DQUFaLEVBTDJCO0NBQTVCOzs7QUFTQSxTQUFTLGdCQUFULENBQTBCLElBQTFCLEVBQStCOzs7OztBQUEvQixTQU1TLGlCQUFULENBQTJCLElBQTNCLEVBQWdDOztDQUFoQzs7O0FDakdBLFNBQVMsY0FBVCxHQUEwQjs7O0NBQTFCOztBQUtBLFNBQVMsNEJBQVQsR0FBdUM7Ozs7O0FBTXRDLFVBQVMsaUJBQVQsQ0FBMkIsSUFBM0IsRUFBZ0M7QUFDL0IsZ0JBQWMsU0FBUyxNQUFULENBQWdCLElBQWhCLENBQWQsRUFEK0I7RUFBaEM7O0FBSUEsU0FBUSxHQUFSLENBQVksb0VBQVo7OztBQVZzQyxLQWFsQyxlQUFlLEtBQUssS0FBTCxDQUFZLEtBQUssTUFBTCxLQUFnQixJQUFoQixDQUEzQixDQWJrQztBQWN0QyxLQUFJLGdCQUFnQixLQUFLLEtBQUwsQ0FBWSxLQUFLLE1BQUwsS0FBZ0IsR0FBaEIsQ0FBNUIsQ0Fka0M7QUFldEMsS0FBSSxnQkFBZ0IsS0FBSyxLQUFMLENBQVksS0FBSyxNQUFMLEtBQWdCLEVBQWhCLENBQTVCLENBZmtDO0FBZ0J0QyxLQUFJLGdCQUFnQixDQUNuQixPQUFPLFlBQVAsQ0FEbUIsRUFFbkIsT0FBTyxlQUFlLGFBQWYsQ0FGWSxFQUduQixPQUFPLGVBQWUsYUFBZixDQUhZLEVBSW5CLE9BQU8sQ0FBQyxlQUFlLGFBQWYsQ0FBRCxHQUFpQyxhQUFqQyxDQUpZLEVBS25CLE9BQU8sQ0FBQyxlQUFlLGFBQWYsQ0FBRCxHQUFrQyxhQUFsQyxDQUxZLENBQWhCOztBQWhCa0MsS0F3QmxDLFdBQVcsT0FBTyxjQUFQLENBQVgsQ0F4QmtDO0FBeUJ0QyxlQUFjLE9BQWQsQ0FBc0IsaUJBQXRCLEVBekJzQztDQUF2Qzs7O0FBNkJBLFNBQVMseUJBQVQsQ0FBbUMsSUFBbkMsRUFBd0M7O0NBQXhDOztBQUlBLFNBQVMsbUJBQVQsR0FBOEI7O0NBQTlCOztBQUlBLFNBQVMsY0FBVCxHQUF5Qjs7QUFFeEIsS0FBRyxPQUFPLFlBQVAsS0FBd0IsU0FBeEIsRUFBa0M7QUFDcEMsU0FBTyxZQUFQLEdBQXNCLEVBQXRCLENBRG9DO0FBRXBDLFNBQU8sWUFBUCxDQUFvQixRQUFwQixHQUErQixFQUEvQixDQUZvQztFQUFyQztDQUZEOzs7QUMxQ0EsU0FBUyxXQUFULEdBQXVCO0FBQ3RCLFVBQVMsd0JBQVQsQ0FBa0MsSUFBbEMsRUFBdUM7OztBQUd0QyxVQUFRLEdBQVIsQ0FBWSw4QkFBWixFQUhzQztBQUl0QyxVQUFRLEdBQVIsQ0FBWSxJQUFaLEVBSnNDO0FBS3RDLDhCQUE0QixJQUE1QixFQUxzQztBQU10QyxVQUFRLEdBQVIsQ0FBWSxvQkFBWixFQU5zQztFQUF2Qzs7O0FBRHNCLEVBWXRCLENBQUUsSUFBRixDQUFPLHVFQUF1RSxNQUF2RSxDQUE4RSx1QkFBdUIsSUFBdkIsQ0FBOUUsQ0FBUCxFQUFvSCxJQUFwSCxDQUF5SCx3QkFBekgsRUFac0I7Q0FBdkIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuXG5mdW5jdGlvbiBydW5Vc2VybmFtZUNsaWNrKCl7XG5cdC8vVE9ETyB0aGUgdXNlciBoYXMgbm93IGNsaWNrZWQgY2hlY2sgc28gd2UgbmVlZCB0byBtYWtlIHN1cmUgaXRzIG5vdCBlbXB0eSwgZWxzZSBnaXZlIGFuIGVycm9yXG5cdGlmIChmb3JtSXNFbXB0eSgpKSB7XG5cdFx0cG9wdWxhdGVVc2VhYmxlVXNlck5hbWVMaXN0RnJvbVNlcnZpY2UoKTtcblx0XHR0ZWxsVmlld1JlcXVlc3RJc0xvYWRpbmcoKTtcblx0fSBlbHNlIHtcblx0XHR0ZWxsVmlld0lucHV0SXNFbXB0eSgpXG5cdH1cblx0XG59XG5cblxuXG5mdW5jdGlvbiBydW5PYnNlcnZlcnMoKXtcblx0Ly9UT0RPIGFjdHVhbGx5IGZsZXNoIHRoZXNlIG91dCB0byBcImd1ZXNzXCIgcG9zc2libGUgdXNlcm5hbWVzIHRvIHNlbmQgb3ZlciBpbiBhZGRpdGlvbiB0byB3aGF0IHRoZXkgY2hlY2sgdGhhdCBGSVJTVCBjbGlja1xuXHRydW5Xb3JkT2JzZXJ2ZXIoKTtcblx0cnVuRW1wdHlPYnNlcnZlcigpO1xufSIsIlxuXG5cblxuXG5cblxuXG5mdW5jdGlvbiBmb3JtSXNFbXB0eSgpIHtcblx0Ly8gYm9keS4uLlxuXHRpZiAoZ2V0Rm9ybVZhbHVlKCkgPT0gXCJcIikge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuXG5mdW5jdGlvbiBnZXRGb3JtVmFsdWUoKSB7XG5cdHJldHVybiAkKFwiI2NoZy1iYWxsb29uLWlucHV0XCIpLnZhbCgpO1xufSIsIlxuXG5cbmZ1bmN0aW9uIHRlbGxWaWV3UmVxdWVzdElzTG9hZGluZygpIHtcblx0Ly9UT0RPIHdlIGFkZCBpbiBhIFwid2VyZSBsb2FkaW5nXCIgbWVzc2FnZSBmb3IgdGhlIHVzZXJcbn1cblxuZnVuY3Rpb24gdGVsbFZpZXdSZXF1ZXN0SXNEb25lKG5hbWVzKSB7XG5cdGZ1bmN0aW9uIGFkZFRvSXRlcmF0ZUFycmF5KG5hbWUpIHtcblx0XHR2YXIgaHRtbFRvQWRkID0gXCI8aSBjbGFzcz0ncmVkIGNoZWNrbWFyayBib3ggaWNvbic+PC9pPlwiLmNvbmNhdCggbmFtZSwgXCI8L2JyPlwiKTtcblx0XHR2YXIgY3VycmVudEhUTUwgPSAkKFwiI3VzZXJuYW1lLXN1Z2dlc3Rpb24tdmlld1wiKS5odG1sKCk7XG5cdFx0Ly90aGlzIHJlcmVuZGVycyBhbGwgdGhlIHRoaW5ncyBhbmQgaXRzIHByb2JhYmx5IHByZXR0eSBob3JyaWJsZSBmb3Igc3VyZVxuXHRcdCQoXCIjdXNlcm5hbWUtc3VnZ2VzdGlvbi12aWV3XCIpLmh0bWwoY3VycmVudEhUTUwuY29uY2F0KGh0bWxUb0FkZCkpO1xuXHR9XG5cdGRhdGEuZm9yRWFjaChuYW1lcyk7XG59XG5cbmZ1bmN0aW9uIHRlbGxWaWV3SW5wdXRJc0VtcHR5KCkge1xuXHQvLyBib2R5Li4uXG59IiwiXG5cblxuZnVuY3Rpb24gc2V0dXBVc2VyTmFtZUxpc3QoKXtcblx0Ly9zaW5jZSBJIGRvbnQgaGF2ZSBhbnl0aGluZyB0byBhY3QgYXMgXCJzY29wZVwiIHdlIHdpbGwgcHJldGVuZCBsaWtlIGl0cyB0aGUgd2hvbGUgd2luZG93IChhcHApXG5cdGlmKHdpbmRvdy5VU0VSTkFNRUxJU1QgPT09IHVuZGVmaW5lZCl7XG5cdFx0d2luZG93LlVTRVJOQU1FTElTVCA9IHt9O1xuXHRcdHdpbmRvdy5VU0VSTkFNRUxJU1QudXNlcm5hbWVMaXN0ID0gW107XG5cdFx0d2luZG93LlVTRVJOQU1FTElTVC5nb29kVXNlck5hbWVzID0gW107XG5cdFx0d2luZG93LlVTRVJOQU1FTElTVC5iYWRVc2VyTmFtZXMgPSBbXTtcblx0fVxufVxuXG5mdW5jdGlvbiB1c2VyTmFtZUxlbmd0aCgpIHtcblx0cmV0dXJuIHdpbmRvdy5VU0VSTkFNRUxJU1QudXNlcm5hbWVMaXN0Lmxlbmd0aDtcbn1cblxuLy90aGlzIGp1c3QgcmV0dXJucyBhIGxpc3Qgb2YgdXNlYWJsZSB1c2VybmFtZSBvYmplY3RzLCBvciBhIHN0cmluZyBmb3IgdXNlIHdpdGhpbiBhIHJlcXVlc3QuIGRlcGVuZGluZyBvbiB0aGUgZm9ybWVyIHdpbGwgZGVwZW5kIG9uIHdoYXQgaXQgcmV0dXJucyB1cG9uIGZhaWwsIG5vdCBzdXJlIGp1c3QgeWV0IGxvdHMgdG8gZG9cbmZ1bmN0aW9uIGdldFVzZXJOYW1lTGlzdChmb3JSZXF1ZXN0ID0gZmFsc2UpIHtcblxuXG5cdC8vSSB3YW50ZWQgdG8gbWFrZSBzdXJlIHRoYXQgb25seSB0aGlzIGZ1bmN0aW9uIGNhbiBnZXQgY2FsbGVkLCBzbyB0aGF0IGl0IHdpbGwgcmV0dXJuIHRoZSBwcm9wZXIgc3R1ZmYsIGVuY2Fwc3VsYXRpb24gdGhpbmdzLlxuXHQvL3RoaXMgcmV0dXJucyB0aGUgbGlzdCBvZiBHT09EIHVzZXJuYW1lcyBhcyBhbiBhcnJheVxuXHRmdW5jdGlvbiBnZXRVc2VhYmxlVXNlck5hbWVMaXN0Rm9yQW5JdGVyYXRpb24oKSB7XG5cdH1cblxuXHQvL3RoaXMgcmV0dXJucyB0aGUgbGlzdCBvZiB1c2VybmFtZXMgYXMgYSBzdHJpbmdcblx0ZnVuY3Rpb24gZ2V0VXNlYWJsZVVzZXJOYW1lTGlzdEZvckFSZXF1ZXN0KCkge1xuXHRcdC8vdGhpcyBpcyBuZWVkZWQgdG8gYWN0dWFsbHkgcmV0dXJuIHNvbWV0aGluZ1xuXHRcdHZhciByZXR1cm5TdHJpbmcgPSBcIlwiO1xuXG5cdFx0Ly9sZXRzIG1ha2Ugc3VyZSB0aGF0IHRoaXMgc2NvcGUgaGFzIHRoZSBhYmlsaXR5IHRvIGZvcmVhY2ggb3ZlciB0aGUgYXJyYXkgd2UgYXJlIGFib3V0IHRvIGNyZWF0ZVxuXHRcdC8vd2l0aG91dCBoYXZpbmcgdG8gY3JlYXRlIHRoZSBmdW5jdGlvbiBpbiBsaW5lXG5cdFx0ZnVuY3Rpb24gYWRkVXNlck5hbWUoaXRlbSl7XG5cdFx0XHRyZXR1cm5TdHJpbmcuY29uY2F0KGl0ZW0pO1xuXHRcdFx0cmV0dXJuU3RyaW5nLmNvbmNhdChcIixcIik7XG5cdFx0fVxuXHRcdHdpbmRvdy5VU0VSTkFNRUxJU1QudXNlcm5hbWVMaXN0LmZvckVhY2goYWRkVXNlck5hbWUpXG5cdFx0Y29uc29sZS5sb2coJ2J1aWx0IHRoZSB1c2VybmFtZSBzdHJpbmcgZm9yIHRoZSByZXF1ZXN0Jyk7XG5cdFx0cmV0dXJuIHJldHVyblN0cmluZy5zdWJzdHJpbmcoMCwgcmV0dXJuU3RyaW5nLmxlbmd0aC0xKTtcblx0fVxuXG5cdGlmKGZvclJlcXVlc3Qpe1xuXHRcdHJldHVybiBnZXRVc2VhYmxlVXNlck5hbWVMaXN0Rm9yQVJlcXVlc3QoKTtcblx0fWVsc2V7XG5cdFx0cmV0dXJuIGdldFVzZWFibGVVc2VyTmFtZUxpc3RGb3JBUmVxdWVzdCgpO1xuXHR9XG59XG5cblxuXG5cblxuLy90aGlzIGFjdHVhbGx5IHNldHMgdXAsIHRoZW4gcnVucyB0aGUgYWpheCByZXF1ZXN0XG5mdW5jdGlvbiBwb3B1bGF0ZVVzZWFibGVVc2VyTmFtZUxpc3RGcm9tU2VydmljZSgpIHtcblx0Ly8gVE9ETyBjaGVjayB0aGUgYmVsb3cgcnVucyBjb3JyZWN0bHlcblx0c2V0dXBVc2VyTmFtZUxpc3QoKTtcblx0aWYgKCF1c2VyTmFtZUxlbmd0aCgpKSB7XG5cdFx0bm9Vc2VhYmxlVXNlcm5hbWVzQWRkTnVtYmVycygpO1xuXHR9XG5cdC8vIFRPRE8gdXNlIHRoZSBqc29uIHNlcnZpY2UgdG8gc2VuZCBhIHJlcXVlc3QgdXNpbmcgdGhlIHVzZXJuYW1lTGlzdCBmcm9tIHdpbmRvdyBzY29wZVxuXHRzZW5kUmVxdWVzdCgpO1xufVxuXG5cbi8vdGhpcyBpcyB0aGUgZnVjbnRpb24gdGhhdCBhamF4IGNhbGxzIHdoZW4gaXQgc3VjY2Vzc2Z1bGxseSByZWNpZXZlcyBhIHJlc3BvbnNlXG5mdW5jdGlvbiBwb3B1bGF0ZVVzZWFibGVVc2VyTmFtZUxpc3QoZGF0YSkge1xuXHRmdW5jdGlvbiBzZXR1cEJhZFVzZXJOYW1lKGl0ZW0pe1xuXHRcdHdpbmRvdy5VU0VSTkFNRUxJU1QuYmFkVXNlck5hbWVzLnB1c2goc3RyaW5nKGl0ZW0udXNlcm5hbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldHVwR29vZFVzZXJOYW1lKGl0ZW0pe1xuXHRcdGlmICh3aW5kb3cuVVNFUk5BTUVMSVNULmJhZFVzZXJOYW1lcy5pbmRleE9mKHN0cmluZyhpdGVtLnVzZXJuYW1lKSkgID09IC0xKSB7XG5cdFx0XHR3aW5kb3cuVVNFUk5BTUVMSVNULmdvb2RVc2VyTmFtZXMucHVzaChzdHJpbmcoaXRlbS51c2VybmFtZSkpO1xuXHRcdH1cblx0fVxuXHQvLyBUT0RPIGNoZWNrIHRoZSBiZWxvdyBydW5zIGNvcnJlY3RseVxuXHRzZXR1cFVzZXJOYW1lTGlzdCgpO1xuXHRkYXRhLmZvckVhY2goc2V0dXBCYWRVc2VyTmFtZSk7XG5cdGRhdGEuZm9yRWFjaChzZXR1cEdvb2RVc2VyTmFtZSk7XG5cdHdpbmRvdy5VU0VSTkFNRUxJU1QudXNlcm5hbWVMaXN0ID0gW11cblx0Ly8gVE9ETyBmcm9tIHJlc3BvbnNlIHB1dCBsaXN0IG9mIGdvb2QgdXNlcm5hbWVzIGluIHBsYWNlXG5cdHRlbGxWaWV3UmVxdWVzdElzRG9uZSh3aW5kb3cuVVNFUk5BTUVMSVNULmdvb2RVc2VyTmFtZXMpO1xufVxuXG4vL3RoaXMgaXMgdXNlZCBieSB0aGUgZm9ybSBvYnNlcnZlcnMgdG8gYWRkIGluIHBvc3NpYmxlIG5hbWVzIGFzIHRoZXkgZmluZCB0aGVtXG5mdW5jdGlvbiBhZGROYW1lVG9MaXN0KG5hbWUpe1xuXHQvLyBUT0RPIGNoZWNrIHRoZSBiZWxvdyBydW5zIGNvcnJlY3RseVxuXHRzZXR1cFVzZXJOYW1lTGlzdCgpO1xuXHQvL2FnYWluIGNhc2luZyBhcyBzdHJpbmcgY3V6IGl2ZSBwdXQgbm8gdGltZSBpbnRvIGVycm9yIGhhbmRsaW5lXG5cdHdpbmRvdy5VU0VSTkFNRUxJU1QudXNlcm5hbWVMaXN0LnB1c2goc3RyaW5nKG5hbWUpKTtcblx0Y29uc29sZS5sb2coJ2FkZGVkIGEgcG9zc2libGUgdXNlcm5hbWUgZm9yIHVzZScpO1xufVxuXG4vL3RoaXMgaXMgdXNlZCBieSB0aGUgYWpheCByZXNwb25zZSBmdW5jdGlvbiB0byBhZGQgaW4gbmFtZXMgdGhhdCB3b250IHdvcmtcbmZ1bmN0aW9uIGFkZE5hbWVUb0JhZExpc3QobmFtZSl7XG5cdC8vIFRPRE8gYWRkIGluIG5hbWUgdG8gdGhlIGxpc3Qgb2YgYmFkIHVzZXIgbmFtZXMgaW4gd2luZG93IHNjb3BlXG59XG5cblxuLy90aGlzIGlzIHVzZWQgYnkgdGhlIGFqYXggcmVzcG9uc2UgZnVuY3Rpb24gdG8gYWRkIGluIG5hbWVzIHRoYXQgd2lsbCB3b3JrXG5mdW5jdGlvbiBhZGROYW1lVG9Hb29kTGlzdChuYW1lKXtcblx0Ly8gVE9ETyBhZGQgaW4gbmFtZSB0byB0aGUgbGlzdCBvZiBnb29kIHVzZXIgbmFtZXMgaW4gd2luZG93IHNjb3BlXG59IiwiLy9UT0RPIGltcGxlbWVudCB0aGlzIG91dCB0byBhY3R1YWxseSBjaGVjayBmb3Igd29yZHMsIGluc3RlYWQgb2YganVzdCBiZWluZyBhbGwgXCJoZXkgbG9vayBpIGNhbiBhZGQgMiBudW1iZXJzIGF0IHRoZSBlbmRcIlxuXG5cblxuZnVuY3Rpb24gZmluYWxXb3JkQ2hlY2soKSB7XG5cdC8vIFRPRE8gYmVmb3JlIHdlIHNlbmQgb2ZmIHRoZSByZXF1ZXN0LCBtYWtlIHN1cmUgd2UgaGF2ZSBlbm91Z2ggdXNlciBuYW1lcyBiZWluZyBzZW50IG9mIGluIHRoZSByZXF1ZXN0XG5cdC8vIFRPRE8gbWFrZSBzdXJlIHRoZSBiZWxvdyBnZXRzIGNhbGxlZCBhdCB0aGUgcmlnaHQgdGltZSwgYW5kIHdvcmtzXG59XG5cbmZ1bmN0aW9uIG5vVXNlYWJsZVVzZXJuYW1lc0FkZE51bWJlcnMoKXtcblx0Ly8gVE9ETyB3ZSBoYXZlbnQgZG9uZSBzbyB3ZWxsIGFuZCBoYXZlIG5vIHdvcmRzIHRvIHVzZSB0byBnZW5lcmF0ZSBzb21lIGdvb2Qgd29yZHMsIGp1c3QgYWRkIHNvbWUgbnVtYmVycyB0byB3aGF0cyBpbiB0aGUgZm9ybSA6KFxuXG5cblx0Ly9sZXRzIG1ha2Ugc3VyZSB0aGF0IHRoaXMgc2NvcGUgaGFzIHRoZSBhYmlsaXR5IHRvIGZvcmVhY2ggb3ZlciB0aGUgYXJyYXkgd2UgYXJlIGFib3V0IHRvIGNyZWF0ZVxuXHQvL3dpdGhvdXQgaGF2aW5nIHRvIGNyZWF0ZSB0aGUgZnVuY3Rpb24gaW4gbGluZVxuXHRmdW5jdGlvbiBhZGRSYW5kb21Vc2VyTmFtZShpdGVtKXtcblx0XHRhZGROYW1lVG9MaXN0KGZvcm1Xb3JkLmNvbmNhdChpdGVtKSk7XG5cdH1cblxuXHRjb25zb2xlLmxvZygnTyBObyEgb2JzZXJ2ZXJzIGZvdW5kIG5vIHdvcmRzLCBhZGRpbmcgbnVtYmVycyBzbyB3ZSBoYXZlIHNvbWUgbm93Jyk7XG5cdC8vZmlyc3Qgd2UgbmVlZCBzb21lIG51bWJlcnNcblx0Ly9sZXRzIG1ha2Ugc3VyZSB0aGV5IGRvbnQgaGF2ZSBhIHdheSBvZiBiZWluZyB0aGUgc2FtZSEhISFcblx0dmFyIHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAxMDAwICk7XG5cdHZhciByYW5kb21Nb2RpZmVyID0gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqIDEwMCApO1xuXHR2YXIgcmFuZG9tRGl2aWRlciA9IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAxMCApO1xuXHR2YXIgcmFuZG9tTnVtYmVycyA9IFtcblx0XHRzdHJpbmcocmFuZG9tTnVtYmVyKSxcblx0XHRzdHJpbmcocmFuZG9tTnVtYmVyICsgcmFuZG9tTW9kaWZlciksXG5cdFx0c3RyaW5nKHJhbmRvbU51bWJlciAtIHJhbmRvbU1vZGlmZXIpLFxuXHRcdHN0cmluZygocmFuZG9tTnVtYmVyICsgcmFuZG9tTW9kaWZlcikgLyByYW5kb21EaXZpZGVyICksXG5cdFx0c3RyaW5nKChyYW5kb21OdW1iZXIgLSByYW5kb21Nb2RpZmVyKSAgLyByYW5kb21EaXZpZGVyICksXG5cdF1cblx0Ly90aGVuIHdlIG5lZWQgdG8gZ2V0IHRoZSB1c2VybmFtZSBpdHNlbGYsIGdvbm5hIGNhc3QgYXMgc3RyaW5nIGN1ei4uLiBpIGhhdmUgbm8gZXJyb3IgaGFuZGxpbmcgbGlrZSBhbnl3aGVyZSBpbiBoZXJlIGFuZCBpbSBzY2FyZWRcblx0dmFyIGZvcm1Xb3JkID0gc3RyaW5nKGdldEZvcm1WYWx1ZSgpKTtcblx0cmFuZG9tTnVtYmVycy5mb3JFYWNoKGFkZFJhbmRvbVVzZXJOYW1lKTtcbn1cblxuLy9vbmUgb2YgdGhlIG9ic2VydmVycyBtYXkgaGF2ZSBmb3VuZCBhIG5ldyB3b3JkIHRvIHVzZSwgY2hlY2sgZm9yIGl0IHRoZW4gYWRkIGl0IGluXG5mdW5jdGlvbiBhZGRXb3JkVG9Vc2VhYmxlV29yZHNMaXN0KHdvcmQpe1xuXHQvLyBUT0RPIG1ha2UgdGhlIGFib3ZlIGNvbW1lbnQgY29tZSB0cnVlXG59XG5cbmZ1bmN0aW9uIGdldFVzZWFibGVXb3Jkc0xpc3QoKXtcblx0Ly8gVE9ETyBcbn1cblxuZnVuY3Rpb24gc2V0dXBXb3Jkc0xpc3QoKXtcblx0Ly9zaW5jZSBJIGRvbnQgaGF2ZSBhbnl0aGluZyB0byBhY3QgYXMgXCJzY29wZVwiIHdlIHdpbGwgcHJldGVuZCBsaWtlIGl0cyB0aGUgd2hvbGUgd2luZG93IChhcHApXG5cdGlmKHdpbmRvdy5XT1JET0JTRVJWRVIgPT09IHVuZGVmaW5lZCl7XG5cdFx0d2luZG93LldPUkRPQlNFUlZFUiA9IHt9O1xuXHRcdHdpbmRvdy5XT1JET0JTRVJWRVIud29yZGxpc3QgPSB7fTtcblx0fVxufSIsIlxuXG5cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3QoKSB7XG5cdGZ1bmN0aW9uIHByb2VjY2Vzc1JlcXVlc3RSZXNwb25zZShkYXRhKXtcblx0XHQvLyBUaGlzIGxvZ3MgVHJ1bXA0UHJlcydzIHVzZXIgZGF0YSwgc2luY2UgdGhlIHVzZXJuYW1lIGlzIHJlZ2lzdGVyZWQsIGJ1dFxuXHRcdC8vIG5vIHVzZXIgZGF0YSBmb3IgRmVlbFRoZUJlcm4xLCBzaW5jZSB0aGF0IHVzZXJuYW1lIGlzIG5vdCBjdXJyZW50bHkgcmVnaXN0ZXJlZFxuXHRcdGNvbnNvbGUubG9nKFwicmVxdWVzdCBkb25lLCBsb2dpYyBzdGFydGluZ1wiKTtcblx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblx0XHRwb3B1bGF0ZVVzZWFibGVVc2VyTmFtZUxpc3QoZGF0YSk7XG5cdFx0Y29uc29sZS5sb2coXCJyZXF1ZXN0IGxvZ2ljIGRvbmVcIik7XG5cdH1cblxuXHRcblx0Ly8gVE9ETyB1c2UgdGhlIGJlbG93IGNvcGllZCBjb2RlIHRvIGJyaW5nIGFsbCB0aGUgY29tbWVudHMgYmVsb3cgaXQgdG8gbGlmZVxuXHQkLmFqYXgoXCJodHRwOi8vY2hlZ2ctdHV0b3JzLmFwcHNwb3QuY29tL2NvZGluZy1jaGFsbGVuZ2UvYXBpL3VzZXIvP3VzZXJuYW1lPVwiLmNvbmNhdChnZXRVc2VhYmxlVXNlck5hbWVMaXN0KHRydWUpKSkuZG9uZShwcm9lY2Nlc3NSZXF1ZXN0UmVzcG9uc2UpO1xufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
